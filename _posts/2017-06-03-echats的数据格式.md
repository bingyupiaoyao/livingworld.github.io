---
layout: post
title: "echats的数据格式"
date: 2017-06-03 12:00:00 +0800
description: "echats的数据格式"
categories: 其他
tag: [javascript]
---   


### echats的数据格式

- [地图下载](http://echarts.baidu.com/download-map.html)

### JSON格式转换
```
private string ConvertJsonString(string str)
    {
        //格式化json字符串
        JsonSerializer serializer = new JsonSerializer();
        TextReader tr = new StringReader(str);
        JsonTextReader jtr = new JsonTextReader(tr);
        object obj = serializer.Deserialize(jtr);
        if (obj != null)
        {
            StringWriter textWriter = new StringWriter();
            JsonTextWriter jsonWriter = new JsonTextWriter(textWriter)
            {
                Formatting = Formatting.Indented,
                Indentation = 4,
                IndentChar = ' '
            };
            serializer.Serialize(jsonWriter, obj);
            return textWriter.ToString();
        }
        else
        {
            return str;
        }         
    }
```
输入格式：
```
 {"status": 1, "sum": 9}
```

输出格式：
```
{
    "status": 1,
    "sum": 9
}
```

### 检索关键词：c# dictionary one key many values

https://stackoverflow.com/questions/16898731/creating-an-json-array-in-c-sharp

C# Convert List<string> to Dictionary<string, string>

store many values in single key of json

## LINQ to JSON
搞不定

## 今日总结
- 花了一天时间琢磨如何将datatable数据序列化成我想要的JSON格式数据，但翻阅了许多资料，受阻于语言障碍，都未解决。于是调整方式，直接采用javascript读取json文件数据的方式处理得到想要的结果。
- 但今天略微对c#list、object等有了点儿了解，而且json格式数据考虑字面量的形式更佳。

### asp.net动态添加用户控件时，若采用javascript形式的用户控件则加载失败，除了第一次加载触发了浏览器js事件外，在面板切换控件中处理却无法触发该事件。

### 检索关键词：TabContainer load javascript usercontrol failed
在javascript中添加函数,并将要加载的内容放置其中即可。
```
 function pageLoad() {

    }
```